CREATE TABLE SAELGER
(
saelger_id INTEGER IDENTITY PRIMARY KEY,
saelgernavn VARCHAR(250),
rang VARCHAR(50),
beloebsgraense DOUBLE
)

CREATE TABLE POSTNUMMER
(
postnummer VARCHAR(4) PRIMARY KEY,
bynavn VARCHAR(50),
)

CREATE TABLE CPRNUMMER
(
CPR_id INTEGER IDENTITY PRIMARY KEY,
CPRnummer VARCHAR(10) UNIQUE NOT NULL,
)

CREATE TABLE KUNDE
(
kunde_id INTEGER IDENTITY PRIMARY KEY,
CPR_id INTEGER FOREIGN KEY REFERENCES CPRNUMMER(CPR_id),
kundenavn VARCHAR(250),
adresse VARCHAR(80),
postnummer VARCHAR(4) FOREIGN KEY REFERENCES postnummer(postnummer),
telefon VARCHAR(11)
)

CREATE TABLE BIL
(
bil_id INTEGER IDENTITY PRIMARY KEY,
pris DOUBLE
)

CREATE TABLE LAANETILBUD
(
laanetilbud_id INTEGER IDENTITY PRIMARY KEY,
rentesats DOUBLE,
tilbagebetalingsperiode INTEGER,
udbetaling DOUBLE,
AAOP DOUBLE,
kunde_id INTEGER FOREIGN KEY REFERENCES kunde(kunde_id),
bil_id INTEGER FOREIGN KEY REFERENCES bil(bil_id),
saelger_id INTEGER FOREIGN KEY REFERENCES saelger(saelger_id),
oprettelsestidspunkt TIMESTAMP,
)

-- insert alle postnumre gennem eclipse





INSERT INTO "PUBLIC"."SAELGER"
(  "SAELGERNAVN", "RANG", "BELOEBSGRAENSE" )
VALUES ( 'Anders Looft', 'CEO', '0')

INSERT INTO "PUBLIC"."CPRNUMMER"
( "CPRNUMMER" )
VALUES ( '0807911449')



INSERT INTO "PUBLIC"."KUNDE"
( "KUNDENAVN", "CPR_ID", "ADRESSE", "POSTNUMMER", "TELEFON" )
VALUES ( 'Anders Looft', '0', 'Ny Møllevej 14A 1 tv', '7400', '60150191')

INSERT INTO "PUBLIC"."BIL" ( "PRIS" ) VALUES ( 1000000 );
INSERT INTO "PUBLIC"."BIL" ( "PRIS" ) VALUES ( 2500000 );
INSERT INTO "PUBLIC"."BIL" ( "PRIS" ) VALUES ( 3100000 );

INSERT INTO "PUBLIC"."LAANETILBUD"
(  "RENTESATS", "TILBAGEBETALINGSPERIODE", "UDBETALING", "AAOP", "KUNDE_ID", "BIL_ID", "SAELGER_ID", "OPRETTELSESTIDSPUNKT" )
VALUES ( '7.3', '18' , '500000' , '1.3', '0', '0', '0', '2015-06-05 09:24:08')


SELECT rentesats, tilbagebetalingsperiode, udbetaling, AAOP, oprettelsestidspunkt, kunde.kundenavn, kunde.adresse, kunde.postnummer, postnummer.bynavn, kunde.telefon, CPRnummer.CPRnummer, bil.pris, saelger.saelgernavn, saelger.rang, saelger.beloebsgraense FROM laanetilbud INNER JOIN bil ON laanetilbud.bil_id = bil.bil_id INNER JOIN kunde ON laanetilbud.kunde_id = kunde.kunde_id INNER JOIN saelger ON laanetilbud.saelger_id = saelger.saelger_id INNER JOIN postnummer ON postnummer.postnummer = kunde.postnummer INNER JOIN CPRnummer ON kunde.CPR_id = CPRnummer.CPR_id;